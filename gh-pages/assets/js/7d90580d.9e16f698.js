"use strict";(globalThis.webpackChunkphysical_ai_curriculum_book=globalThis.webpackChunkphysical_ai_curriculum_book||[]).push([[362],{1650(n,e,i){i.r(e),i.d(e,{assets:()=>s,contentTitle:()=>r,default:()=>u,frontMatter:()=>t,metadata:()=>l,toc:()=>c});var a=i(4848),o=i(8453);const t={sidebar_position:1},r="Simulation Tutorial: Creating Your First Robot Simulation",l={id:"tutorials/simulation-tutorial",title:"Simulation Tutorial: Creating Your First Robot Simulation",description:"Introduction",source:"@site/docs/tutorials/simulation-tutorial.md",sourceDirName:"tutorials",slug:"/tutorials/simulation-tutorial",permalink:"/physical-ai-curriculum-book/docs/tutorials/simulation-tutorial",draft:!1,unlisted:!1,editUrl:"https://github.com/Anam-Noman/physical-ai-curriculum-book/edit/main/docs/tutorials/simulation-tutorial.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"curriculumSidebar",previous:{title:"Basic ROS 2 Tutorial",permalink:"/physical-ai-curriculum-book/docs/tutorials/basic-ros2-tutorial"}},s={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Setting Up Your Workspace",id:"step-1-setting-up-your-workspace",level:2},{value:"Create a New ROS 2 Package",id:"create-a-new-ros-2-package",level:3},{value:"Create Directory Structure",id:"create-directory-structure",level:3},{value:"Step 2: Creating the Robot Model (URDF)",id:"step-2-creating-the-robot-model-urdf",level:2},{value:"Create the Basic Robot URDF",id:"create-the-basic-robot-urdf",level:3},{value:"Step 3: Adding Gazebo-Specific Extensions",id:"step-3-adding-gazebo-specific-extensions",level:2},{value:"Create the Gazebo URDF with Plugins",id:"create-the-gazebo-urdf-with-plugins",level:3},{value:"Create Combined URDF",id:"create-combined-urdf",level:3},{value:"Step 4: Creating a Simulation World",id:"step-4-creating-a-simulation-world",level:2},{value:"Step 5: Creating Launch Files",id:"step-5-creating-launch-files",level:2},{value:"Step 6: Creating a Simple Navigation Node",id:"step-6-creating-a-simple-navigation-node",level:2},{value:"Step 7: Creating Setup Scripts and Package Configuration",id:"step-7-creating-setup-scripts-and-package-configuration",level:2},{value:"Update setup.py",id:"update-setuppy",level:3},{value:"Step 8: Running the Simulation",id:"step-8-running-the-simulation",level:2},{value:"Building the Package",id:"building-the-package",level:3},{value:"Launching the Simulation",id:"launching-the-simulation",level:3},{value:"Testing the Simulation",id:"testing-the-simulation",level:3},{value:"Troubleshooting Common Issues",id:"troubleshooting-common-issues",level:2},{value:"Issue 1: Robot Doesn&#39;t Move",id:"issue-1-robot-doesnt-move",level:3},{value:"Issue 2: Sensor Data Not Available",id:"issue-2-sensor-data-not-available",level:3},{value:"Issue 3: URDF Not Loading",id:"issue-3-urdf-not-loading",level:3},{value:"Extending the Tutorial",id:"extending-the-tutorial",level:2},{value:"Adding More Sensors",id:"adding-more-sensors",level:3},{value:"Implementing More Complex Behaviors",id:"implementing-more-complex-behaviors",level:3},{value:"Performance Optimization",id:"performance-optimization",level:3},{value:"Summary",id:"summary",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.h1,{id:"simulation-tutorial-creating-your-first-robot-simulation",children:"Simulation Tutorial: Creating Your First Robot Simulation"}),"\n",(0,a.jsx)(e.h2,{id:"introduction",children:"Introduction"}),"\n",(0,a.jsx)(e.p,{children:"This tutorial will guide you through creating your first complete robot simulation environment using Gazebo and ROS 2. You'll build a simple differential drive robot with sensors that can navigate around a virtual world, demonstrating the core concepts of Digital Twin technology for Physical AI systems."}),"\n",(0,a.jsx)(e.p,{children:"By the end of this tutorial, you'll have:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Created a robot model with proper URDF description"}),"\n",(0,a.jsx)(e.li,{children:"Set up a Gazebo simulation environment"}),"\n",(0,a.jsx)(e.li,{children:"Added realistic sensors (camera and LiDAR)"}),"\n",(0,a.jsx)(e.li,{children:"Implemented basic robot control using ROS 2"}),"\n",(0,a.jsx)(e.li,{children:"Validated the simulation through navigation tasks"}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,a.jsx)(e.p,{children:"Before starting this tutorial, ensure you have:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"ROS 2 Humble Hawksbill installed and configured"}),"\n",(0,a.jsx)(e.li,{children:"Gazebo installed and verified"}),"\n",(0,a.jsx)(e.li,{children:"Basic Python and ROS 2 knowledge"}),"\n",(0,a.jsx)(e.li,{children:"Completed the basic ROS 2 tutorial"}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"step-1-setting-up-your-workspace",children:"Step 1: Setting Up Your Workspace"}),"\n",(0,a.jsx)(e.h3,{id:"create-a-new-ros-2-package",children:"Create a New ROS 2 Package"}),"\n",(0,a.jsx)(e.p,{children:"First, let's create a workspace and package for our simulation:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"# Create a new workspace\nmkdir -p ~/simulation_ws/src\ncd ~/simulation_ws\n\n# Create a new package for our robot simulation\nros2 pkg create --build-type ament_python robot_simulation_tutorial --dependencies rclpy geometry_msgs sensor_msgs std_msgs ros_gz_bridge\n"})}),"\n",(0,a.jsx)(e.h3,{id:"create-directory-structure",children:"Create Directory Structure"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"cd ~/simulation_ws/src/robot_simulation_tutorial\nmkdir -p launch meshes urdf config worlds\n"})}),"\n",(0,a.jsx)(e.h2,{id:"step-2-creating-the-robot-model-urdf",children:"Step 2: Creating the Robot Model (URDF)"}),"\n",(0,a.jsx)(e.h3,{id:"create-the-basic-robot-urdf",children:"Create the Basic Robot URDF"}),"\n",(0,a.jsxs)(e.p,{children:["Create ",(0,a.jsx)(e.code,{children:"urdf/turtlebot_example.urdf"}),":"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<robot name="turtlebot_example" xmlns:xacro="http://www.ros.org/wiki/xacro">\n\n  \x3c!-- Base Link --\x3e\n  <link name="base_link">\n    <inertial>\n      <mass value="1.0"/>\n      <origin xyz="0 0 0.1"/>\n      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.02"/>\n    </inertial>\n    \n    <visual>\n      <origin xyz="0 0 0.1"/>\n      <geometry>\n        <cylinder radius="0.15" length="0.1"/>\n      </geometry>\n      <material name="green">\n        <color rgba="0 0.8 0 1"/>\n      </material>\n    </visual>\n    \n    <collision>\n      <origin xyz="0 0 0.1"/>\n      <geometry>\n        <cylinder radius="0.15" length="0.1"/>\n      </geometry>\n    </collision>\n  </link>\n\n  \x3c!-- Left Wheel --\x3e\n  <link name="wheel_left">\n    <inertial>\n      <mass value="0.1"/>\n      <origin xyz="0 0 0"/>\n      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.002"/>\n    </inertial>\n    \n    <visual>\n      <origin xyz="0 0 0"/>\n      <geometry>\n        <cylinder radius="0.05" length="0.02"/>\n      </geometry>\n      <material name="black">\n        <color rgba="0 0 0 1"/>\n      </material>\n    </visual>\n    \n    <collision>\n      <origin xyz="0 0 0"/>\n      <geometry>\n        <cylinder radius="0.05" length="0.02"/>\n      </geometry>\n    </collision>\n  </link>\n\n  \x3c!-- Right Wheel --\x3e\n  <link name="wheel_right">\n    <inertial>\n      <mass value="0.1"/>\n      <origin xyz="0 0 0"/>\n      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.002"/>\n    </inertial>\n    \n    <visual>\n      <origin xyz="0 0 0"/>\n      <geometry>\n        <cylinder radius="0.05" length="0.02"/>\n      </geometry>\n      <material name="black">\n        <color rgba="0 0 0 1"/>\n      </material>\n    </visual>\n    \n    <collision>\n      <origin xyz="0 0 0"/>\n      <geometry>\n        <cylinder radius="0.05" length="0.02"/>\n      </geometry>\n    </collision>\n  </link>\n\n  \x3c!-- Camera Link --\x3e\n  <link name="camera_link">\n    <inertial>\n      <mass value="0.01"/>\n      <origin xyz="0 0 0"/>\n      <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6"/>\n    </inertial>\n    \n    <visual>\n      <origin xyz="0 0 0"/>\n      <geometry>\n        <box size="0.02 0.08 0.04"/>\n      </geometry>\n      <material name="black"/>\n    </visual>\n    \n    <collision>\n      <origin xyz="0 0 0"/>\n      <geometry>\n        <box size="0.02 0.08 0.04"/>\n      </geometry>\n    </collision>\n  </link>\n\n  \x3c!-- Joints --\x3e\n  <joint name="base_to_wheel_left" type="continuous">\n    <parent link="base_link"/>\n    <child link="wheel_left"/>\n    <origin xyz="0 0.15 0.05" rpy="-1.570796 0 0"/>\n    <axis xyz="0 0 1"/>\n  </joint>\n\n  <joint name="base_to_wheel_right" type="continuous">\n    <parent link="base_link"/>\n    <child link="wheel_right"/>\n    <origin xyz="0 -0.15 0.05" rpy="-1.570796 0 0"/>\n    <axis xyz="0 0 1"/>\n  </joint>\n\n  <joint name="base_to_camera" type="fixed">\n    <parent link="base_link"/>\n    <child link="camera_link"/>\n    <origin xyz="0.1 0 0.1" rpy="0 0 0"/>\n  </joint>\n\n</robot>\n'})}),"\n",(0,a.jsx)(e.h2,{id:"step-3-adding-gazebo-specific-extensions",children:"Step 3: Adding Gazebo-Specific Extensions"}),"\n",(0,a.jsx)(e.h3,{id:"create-the-gazebo-urdf-with-plugins",children:"Create the Gazebo URDF with Plugins"}),"\n",(0,a.jsxs)(e.p,{children:["Create ",(0,a.jsx)(e.code,{children:"urdf/turtlebot_example.gazebo.xacro"}),":"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<robot xmlns:xacro="http://www.ros.org/wiki/xacro">\n\n  \x3c!-- Gazebo Material --\x3e\n  <gazebo reference="base_link">\n    <material>Gazebo/Green</material>\n  </gazebo>\n\n  <gazebo reference="wheel_left">\n    <material>Gazebo/Black</material>\n  </gazebo>\n\n  <gazebo reference="wheel_right">\n    <material>Gazebo/Black</material>\n  </gazebo>\n\n  <gazebo reference="camera_link">\n    <material>Gazebo/Black</material>\n  </gazebo>\n\n  \x3c!-- Gazebo Plugin for Differential Drive --\x3e\n  <gazebo>\n    <plugin filename="libgazebo_ros_diff_drive.so" name="differential_drive">\n      <left_joint>wheel_left_joint</left_joint>\n      <right_joint>wheel_right_joint</right_joint>\n      <wheel_separation>0.3</wheel_separation>\n      <wheel_diameter>0.1</wheel_diameter>\n      <max_wheel_torque>20</max_wheel_torque>\n      <max_wheel_acceleration>10.0</max_wheel_acceleration>\n      <command_topic>cmd_vel</command_topic>\n      <odometry_topic>odom</odometry_topic>\n      <odometry_frame>odom</odometry_frame>\n      <robot_base_frame>base_link</robot_base_frame>\n      <publish_odom>true</publish_odom>\n      <publish_odom_tf>true</publish_odom_tf>\n      <publish_wheel_tf>true</publish_wheel_tf>\n    </plugin>\n  </gazebo>\n\n  \x3c!-- Camera Sensor --\x3e\n  <gazebo reference="camera_link">\n    <sensor name="camera" type="camera">\n      <update_rate>30</update_rate>\n      <camera name="head">\n        <horizontal_fov>1.047</horizontal_fov> \x3c!-- 60 degrees --\x3e\n        <image>\n          <width>640</width>\n          <height>480</height>\n          <format>R8G8B8</format>\n        </image>\n        <clip>\n          <near>0.05</near>\n          <far>3</far>\n        </clip>\n      </camera>\n      <plugin name="camera_controller" filename="libgazebo_ros_camera.so">\n        <frame_name>camera_link</frame_name>\n        <topic_name>camera/image_raw</topic_name>\n      </plugin>\n    </sensor>\n  </gazebo>\n\n  \x3c!-- LiDAR Sensor --\x3e\n  <gazebo reference="base_link">\n    <sensor name="lidar" type="ray">\n      <update_rate>10</update_rate>\n      <ray>\n        <scan>\n          <horizontal>\n            <samples>360</samples>\n            <resolution>1</resolution>\n            <min_angle>-3.14159</min_angle>\n            <max_angle>3.14159</max_angle>\n          </horizontal>\n        </scan>\n        <range>\n          <min>0.1</min>\n          <max>10</max>\n          <resolution>0.01</resolution>\n        </range>\n      </ray>\n      <plugin name="lidar_controller" filename="libgazebo_ros_ray_sensor.so">\n        <ros>\n          <namespace>/</namespace>\n          <remapping>~/out:=scan</remapping>\n        </ros>\n        <output_type>sensor_msgs/LaserScan</output_type>\n      </plugin>\n    </sensor>\n  </gazebo>\n\n</robot>\n'})}),"\n",(0,a.jsx)(e.h3,{id:"create-combined-urdf",children:"Create Combined URDF"}),"\n",(0,a.jsxs)(e.p,{children:["Create ",(0,a.jsx)(e.code,{children:"urdf/turtlebot_example.urdf.xacro"}),":"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="turtlebot_example">\n  \n  \x3c!-- Include the base robot --\x3e\n  <xacro:include filename="turtlebot_example.urdf"/>\n  \n  \x3c!-- Include Gazebo-specific extensions --\x3e\n  <xacro:include filename="turtlebot_example.gazebo.xacro"/>\n\n</robot>\n'})}),"\n",(0,a.jsx)(e.h2,{id:"step-4-creating-a-simulation-world",children:"Step 4: Creating a Simulation World"}),"\n",(0,a.jsxs)(e.p,{children:["Create ",(0,a.jsx)(e.code,{children:"worlds/simple_room.sdf"}),":"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0" ?>\n<sdf version="1.7">\n  <world name="simple_room">\n    \x3c!-- Physics engine configuration --\x3e\n    <physics type="ode">\n      <max_step_size>0.001</max_step_size>\n      <real_time_update_rate>1000</real_time_update_rate>\n      <real_time_factor>1</real_time_factor>\n    </physics>\n\n    \x3c!-- Gravity --\x3e\n    <gravity>0 0 -9.8</gravity>\n\n    \x3c!-- Ground plane --\x3e\n    <include>\n      <uri>model://ground_plane</uri>\n    </include>\n\n    \x3c!-- Sun light --\x3e\n    <include>\n      <uri>model://sun</uri>\n    </include>\n\n    \x3c!-- Room walls --\x3e\n    <model name="room_walls">\n      \x3c!-- Wall 1: Front wall --\x3e\n      <link name="wall_1">\n        <pose>-3 0 1.5 0 0 0</pose>\n        <collision name="collision">\n          <geometry>\n            <box>\n              <size>0.1 6 3</size>\n            </box>\n          </geometry>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <box>\n              <size>0.1 6 3</size>\n            </box>\n          </geometry>\n          <material>\n            <ambient>0.8 0.8 0.8 1</ambient>\n            <diffuse>0.8 0.8 0.8 1</diffuse>\n          </material>\n        </visual>\n      </link>\n\n      \x3c!-- Wall 2: Back wall --\x3e\n      <link name="wall_2">\n        <pose>3 0 1.5 0 0 0</pose>\n        <collision name="collision">\n          <geometry>\n            <box>\n              <size>0.1 6 3</size>\n            </box>\n          </geometry>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <box>\n              <size>0.1 6 3</size>\n            </box>\n          </geometry>\n          <material>\n            <ambient>0.8 0.8 0.8 1</ambient>\n            <diffuse>0.8 0.8 0.8 1</diffuse>\n          </material>\n        </visual>\n      </link>\n\n      \x3c!-- Wall 3: Left wall --\x3e\n      <link name="wall_3">\n        <pose>0 -3 1.5 0 0 0</pose>\n        <collision name="collision">\n          <geometry>\n            <box>\n              <size>6 0.1 3</size>\n            </box>\n          </geometry>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <box>\n              <size>6 0.1 3</size>\n            </box>\n          </geometry>\n          <material>\n            <ambient>0.8 0.8 0.8 1</ambient>\n            <diffuse>0.8 0.8 0.8 1</diffuse>\n          </material>\n        </visual>\n      </link>\n\n      \x3c!-- Wall 4: Right wall --\x3e\n      <link name="wall_4">\n        <pose>0 3 1.5 0 0 0</pose>\n        <collision name="collision">\n          <geometry>\n            <box>\n              <size>6 0.1 3</size>\n            </box>\n          </geometry>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <box>\n              <size>6 0.1 3</size>\n            </box>\n          </geometry>\n          <material>\n            <ambient>0.8 0.8 0.8 1</ambient>\n            <diffuse>0.8 0.8 0.8 1</diffuse>\n          </material>\n        </visual>\n      </link>\n    </model>\n\n    \x3c!-- Obstacle --\x3e\n    <model name="obstacle">\n      <pose>1 1 0.2 0 0 0</pose>\n      <link name="link">\n        <collision name="collision">\n          <geometry>\n            <box>\n              <size>0.4 0.4 0.4</size>\n            </box>\n          </geometry>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <box>\n              <size>0.4 0.4 0.4</size>\n            </box>\n          </geometry>\n          <material>\n            <ambient>0.9 0.4 0.1 1</ambient>\n            <diffuse>0.9 0.4 0.1 1</diffuse>\n          </material>\n        </visual>\n        <inertial>\n          <mass>1.0</mass>\n          <inertia>\n            <ixx>0.01</ixx>\n            <ixy>0</ixy>\n            <ixz>0</ixz>\n            <iyy>0.01</iyy>\n            <iyz>0</iyz>\n            <izz>0.01</izz>\n          </inertia>\n        </inertial>\n      </link>\n    </model>\n\n  </world>\n</sdf>\n'})}),"\n",(0,a.jsx)(e.h2,{id:"step-5-creating-launch-files",children:"Step 5: Creating Launch Files"}),"\n",(0,a.jsxs)(e.p,{children:["Create ",(0,a.jsx)(e.code,{children:"launch/simulation_launch.py"}),":"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"import os\nfrom launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument, IncludeLaunchDescription\nfrom launch.conditions import IfCondition\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\nfrom launch.substitutions import LaunchConfiguration, PathJoinSubstitution\nfrom launch_ros.actions import Node\nfrom launch_ros.substitutions import FindPackageShare\n\n\ndef generate_launch_description():\n    # Declare launch arguments\n    declared_arguments = []\n    declared_arguments.append(\n        DeclareLaunchArgument(\n            'world',\n            default_value='simple_room.sdf',\n            description='Choose one of the world files from `/robot_simulation_tutorial/worlds`'\n        )\n    )\n    \n    declared_arguments.append(\n        DeclareLaunchArgument(\n            'use_rviz',\n            default_value='true',\n            description='Whether to launch RViz'\n        )\n    )\n\n    # Launch arguments\n    world = LaunchConfiguration('world')\n    use_rviz = LaunchConfiguration('use_rviz')\n\n    # Get URDF via xacro\n    robot_description_content = PathJoinSubstitution([\n        FindPackageShare('robot_simulation_tutorial'),\n        'urdf',\n        'turtlebot_example.urdf.xacro'\n    ])\n\n    # Robot State Publisher node\n    robot_state_publisher_node = Node(\n        package='robot_state_publisher',\n        executable='robot_state_publisher',\n        parameters=[{'robot_description': robot_description_content}],\n    )\n\n    # Gazebo launch\n    gazebo = IncludeLaunchDescription(\n        PythonLaunchDescriptionSource([\n            PathJoinSubstitution([\n                FindPackageShare('ros_gz_sim'),\n                'launch',\n                'gz_sim.launch.py'\n            ])\n        ]),\n        launch_arguments={'gz_args': PathJoinSubstitution([\n            FindPackageShare('robot_simulation_tutorial'),\n            'worlds',\n            world\n        ])}.items()\n    )\n\n    # Spawn robot in Gazebo\n    spawn_robot = Node(\n        package='ros_gz_sim',\n        executable='create',\n        arguments=[\n            '-name', 'turtlebot_example',\n            '-topic', 'robot_description',\n            '-x', '0',\n            '-y', '0',\n            '-z', '0.2'\n        ],\n        output='screen'\n    )\n\n    # RViz2 node\n    rviz2_node = Node(\n        package='rviz2',\n        executable='rviz2',\n        name='rviz2',\n        output='screen',\n        condition=IfCondition(use_rviz)\n    )\n\n    # Create launch description\n    ld = LaunchDescription(declared_arguments)\n    ld.add_action(gazebo)\n    ld.add_action(spawn_robot)\n    ld.add_action(robot_state_publisher_node)\n    ld.add_action(rviz2_node)\n\n    return ld\n"})}),"\n",(0,a.jsx)(e.h2,{id:"step-6-creating-a-simple-navigation-node",children:"Step 6: Creating a Simple Navigation Node"}),"\n",(0,a.jsxs)(e.p,{children:["Create ",(0,a.jsx)(e.code,{children:"robot_simulation_tutorial/navigation_example.py"}),":"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:'#!/usr/bin/env python3\n\n"""\nSimple navigation example for the simulated robot.\nThis node subscribes to laser scan data and publishes velocity commands\nto navigate around obstacles.\n"""\n\nimport rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import LaserScan\nfrom geometry_msgs.msg import Twist\nfrom math import pi\n\n\nclass SimpleNavigation(Node):\n    def __init__(self):\n        super().__init__(\'simple_navigation\')\n        \n        # Create publisher for velocity commands\n        self.cmd_vel_pub = self.create_publisher(Twist, \'cmd_vel\', 10)\n        \n        # Create subscriber for laser scan\n        self.scan_sub = self.create_subscription(\n            LaserScan,\n            \'scan\',\n            self.scan_callback,\n            10\n        )\n        \n        # Timer for periodic control updates\n        self.timer = self.create_timer(0.1, self.control_loop)  # 10 Hz\n        \n        # Robot state\n        self.obstacle_detected = False\n        self.scan_data = None\n        \n        self.get_logger().info(\'Simple Navigation node initialized\')\n\n    def scan_callback(self, msg):\n        """Process incoming laser scan data"""\n        self.scan_data = msg\n        # Check for obstacles in front of the robot\n        min_range = float(\'inf\')\n        \n        # Look at the front 30 degrees (15 degrees on each side of center)\n        front_range_start = len(msg.ranges) // 2 - 15\n        front_range_end = len(msg.ranges) // 2 + 15\n        \n        for i in range(front_range_start, front_range_end):\n            if 0 <= i < len(msg.ranges):\n                if msg.ranges[i] < min_range and not float(\'inf\') == msg.ranges[i]:\n                    min_range = msg.ranges[i]\n        \n        # Set obstacle flag if obstacle is closer than 1 meter\n        self.obstacle_detected = min_range < 1.0\n\n    def control_loop(self):\n        """Main control loop"""\n        if self.scan_data is None:\n            return\n            \n        cmd_msg = Twist()\n        \n        # Simple obstacle avoidance behavior\n        if self.obstacle_detected:\n            # If obstacle detected, turn right\n            cmd_msg.linear.x = 0.0\n            cmd_msg.angular.z = -0.5  # Turn right\n        else:\n            # Otherwise, move forward\n            cmd_msg.linear.x = 0.5   # Move forward at 0.5 m/s\n            cmd_msg.angular.z = 0.0  # No rotation\n        \n        # Publish the command\n        self.cmd_vel_pub.publish(cmd_msg)\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n    \n    navigator = SimpleNavigation()\n    \n    try:\n        rclpy.spin(navigator)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        navigator.destroy_node()\n        rclpy.shutdown()\n\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,a.jsx)(e.h2,{id:"step-7-creating-setup-scripts-and-package-configuration",children:"Step 7: Creating Setup Scripts and Package Configuration"}),"\n",(0,a.jsx)(e.h3,{id:"update-setuppy",children:"Update setup.py"}),"\n",(0,a.jsxs)(e.p,{children:["Edit ",(0,a.jsx)(e.code,{children:"setup.py"})," to include the new Python script:"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"from setuptools import setup\nimport os\nfrom glob import glob\n\npackage_name = 'robot_simulation_tutorial'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=[package_name],\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n        # Include all launch files\n        (os.path.join('share', package_name, 'launch'), glob('launch/*.py')),\n        # Include all URDF files\n        (os.path.join('share', package_name, 'urdf'), glob('urdf/*')),\n        # Include all world files\n        (os.path.join('share', package_name, 'worlds'), glob('worlds/*')),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='Your Name',\n    maintainer_email='your.email@example.com',\n    description='Robot Simulation Tutorial Package',\n    license='Apache License 2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'navigation_example = robot_simulation_tutorial.navigation_example:main',\n        ],\n    },\n)\n"})}),"\n",(0,a.jsx)(e.h2,{id:"step-8-running-the-simulation",children:"Step 8: Running the Simulation"}),"\n",(0,a.jsx)(e.h3,{id:"building-the-package",children:"Building the Package"}),"\n",(0,a.jsx)(e.p,{children:"First, build your ROS 2 package:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"cd ~/simulation_ws\ncolcon build --packages-select robot_simulation_tutorial\nsource install/setup.bash\n"})}),"\n",(0,a.jsx)(e.h3,{id:"launching-the-simulation",children:"Launching the Simulation"}),"\n",(0,a.jsx)(e.p,{children:"Now you can launch the complete simulation:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"# Launch the simulation with the simple room world\nros2 launch robot_simulation_tutorial simulation_launch.py\n\n# In a new terminal, run the navigation node\nros2 run robot_simulation_tutorial navigation_example\n"})}),"\n",(0,a.jsx)(e.h3,{id:"testing-the-simulation",children:"Testing the Simulation"}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsx)(e.li,{children:"Open Gazebo GUI to visualize the robot in the simulated environment"}),"\n",(0,a.jsxs)(e.li,{children:["Use ",(0,a.jsx)(e.code,{children:"rviz2"})," to visualize sensor data and robot state"]}),"\n",(0,a.jsxs)(e.li,{children:["Monitor topics with ",(0,a.jsx)(e.code,{children:"ros2 topic echo /scan"})," and ",(0,a.jsx)(e.code,{children:"ros2 topic echo /odom"})]}),"\n",(0,a.jsx)(e.li,{children:"The robot should navigate autonomously, avoiding obstacles in its path"}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"troubleshooting-common-issues",children:"Troubleshooting Common Issues"}),"\n",(0,a.jsx)(e.h3,{id:"issue-1-robot-doesnt-move",children:"Issue 1: Robot Doesn't Move"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Symptom"}),": The robot remains stationary in Gazebo"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Solution"}),": Check that the ",(0,a.jsx)(e.code,{children:"cmd_vel"})," topic is properly connected:","\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"ros2 topic echo /cmd_vel\nros2 topic list\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"issue-2-sensor-data-not-available",children:"Issue 2: Sensor Data Not Available"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Symptom"}),": No data on sensor topics like ",(0,a.jsx)(e.code,{children:"/scan"})," or ",(0,a.jsx)(e.code,{children:"/camera/image_raw"})]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Solution"}),": Verify that Gazebo plugins are properly loaded:","\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"gz topic -l\nros2 run ros_gz_bridge parameter_bridge\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"issue-3-urdf-not-loading",children:"Issue 3: URDF Not Loading"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Symptom"}),': Error when spawning the robot: "No valid robot description found"']}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Solution"}),": Check that the URDF file path is correct and accessible:","\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'ros2 run robot_state_publisher robot_state_publisher --ros-args -p robot_description:="$(xacro path/to/urdf.xacro)"\n'})}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"extending-the-tutorial",children:"Extending the Tutorial"}),"\n",(0,a.jsx)(e.h3,{id:"adding-more-sensors",children:"Adding More Sensors"}),"\n",(0,a.jsx)(e.p,{children:"You can extend this tutorial by adding additional sensors. For example, to add an IMU:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-xml",children:'\x3c!-- Add to the base_link in your URDF --\x3e\n<sensor name="imu" type="imu">\n  <update_rate>100</update_rate>\n  <topic>imu/data</topic>\n  <always_on>true</always_on>\n  <visualize>false</visualize>\n</sensor>\n'})}),"\n",(0,a.jsx)(e.h3,{id:"implementing-more-complex-behaviors",children:"Implementing More Complex Behaviors"}),"\n",(0,a.jsx)(e.p,{children:"Try implementing more advanced navigation behaviors:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Goal-based navigation (using MoveIt2 or Nav2)"}),"\n",(0,a.jsx)(e.li,{children:"Mapping (using SLAM packages)"}),"\n",(0,a.jsx)(e.li,{children:"Object recognition (using computer vision)"}),"\n",(0,a.jsx)(e.li,{children:"Multi-robot scenarios"}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,a.jsx)(e.p,{children:"For larger simulations:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Reduce the complexity of meshes"}),"\n",(0,a.jsx)(e.li,{children:"Adjust update rates for sensors"}),"\n",(0,a.jsx)(e.li,{children:"Use simpler collision geometries"}),"\n",(0,a.jsx)(e.li,{children:"Limit the number of objects in the simulation"}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"summary",children:"Summary"}),"\n",(0,a.jsx)(e.p,{children:"This tutorial has walked you through creating a complete robot simulation environment using Gazebo and ROS 2. You've learned to:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Create robot models with proper URDF descriptions"}),"\n",(0,a.jsx)(e.li,{children:"Add realistic sensors and physics properties"}),"\n",(0,a.jsx)(e.li,{children:"Set up simulation environments with obstacles"}),"\n",(0,a.jsx)(e.li,{children:"Implement basic robot control algorithms"}),"\n",(0,a.jsx)(e.li,{children:"Integrate everything with ROS 2"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:"These skills form the foundation for more complex Physical AI applications, allowing you to safely develop and test robot behaviors in simulation before deploying to real hardware. The Digital Twin approach enables rapid iteration and validation of complex AI systems in a controlled environment."}),"\n",(0,a.jsx)(e.p,{children:"The simulation provides a safe, cost-effective way to test and refine Physical AI algorithms before deploying to real robots, significantly reducing the risk and cost of development."})]})}function u(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(d,{...n})}):d(n)}},8453(n,e,i){i.d(e,{R:()=>r,x:()=>l});var a=i(6540);const o={},t=a.createContext(o);function r(n){const e=a.useContext(t);return a.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:r(n.components),a.createElement(t.Provider,{value:e},n.children)}}}]);