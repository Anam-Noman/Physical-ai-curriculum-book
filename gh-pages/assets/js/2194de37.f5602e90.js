"use strict";(globalThis.webpackChunkphysical_ai_curriculum_book=globalThis.webpackChunkphysical_ai_curriculum_book||[]).push([[240],{2818(e,i,n){n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var t=n(4848),s=n(8453);const r={sidebar_position:3},o="ROS 2 Architecture",a={id:"module-1-ros2/week-3-5/architecture",title:"ROS 2 Architecture",description:"Introduction to ROS 2",source:"@site/docs/module-1-ros2/week-3-5/architecture.md",sourceDirName:"module-1-ros2/week-3-5",slug:"/module-1-ros2/week-3-5/architecture",permalink:"/physical-ai-curriculum-book/docs/module-1-ros2/week-3-5/architecture",draft:!1,unlisted:!1,editUrl:"https://github.com/Anam-Noman/physical-ai-curriculum-book/edit/main/docs/module-1-ros2/week-3-5/architecture.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"curriculumSidebar",previous:{title:"Embodied Intelligence Concepts",permalink:"/physical-ai-curriculum-book/docs/module-1-ros2/week-1-2/embodied-intelligence"},next:{title:"Nodes, Topics, Services, and Actions",permalink:"/physical-ai-curriculum-book/docs/module-1-ros2/week-3-5/nodes-topics"}},l={},c=[{value:"Introduction to ROS 2",id:"introduction-to-ros-2",level:2},{value:"Key Improvements in ROS 2",id:"key-improvements-in-ros-2",level:3},{value:"Real-time Support",id:"real-time-support",level:4},{value:"Security",id:"security",level:4},{value:"Improved Architecture",id:"improved-architecture",level:4},{value:"Support for Multiple Platforms",id:"support-for-multiple-platforms",level:4},{value:"Core Concepts of ROS 2 Architecture",id:"core-concepts-of-ros-2-architecture",level:2},{value:"Nodes",id:"nodes",level:3},{value:"Topics and Messages",id:"topics-and-messages",level:3},{value:"Services",id:"services",level:3},{value:"Actions",id:"actions",level:3},{value:"Parameters",id:"parameters",level:3},{value:"Data Distribution Service (DDS)",id:"data-distribution-service-dds",level:2},{value:"Quality of Service (QoS) Settings",id:"quality-of-service-qos-settings",level:3},{value:"Middleware Independence",id:"middleware-independence",level:3},{value:"Client Library Layers",id:"client-library-layers",level:2},{value:"rclcpp and rclpy",id:"rclcpp-and-rclpy",level:3},{value:"Package Management",id:"package-management",level:2},{value:"Ament",id:"ament",level:3},{value:"Package Structure",id:"package-structure",level:3},{value:"Architecture Design Philosophy",id:"architecture-design-philosophy",level:2},{value:"Distributed Computing",id:"distributed-computing",level:3},{value:"Language Independence",id:"language-independence",level:3},{value:"Real-time Safety",id:"real-time-safety",level:3},{value:"Modularity",id:"modularity",level:3},{value:"ROS 2 vs. ROS 1 Architecture",id:"ros-2-vs-ros-1-architecture",level:2},{value:"Implementation Considerations",id:"implementation-considerations",level:2},{value:"Node Design",id:"node-design",level:3},{value:"Communication Patterns",id:"communication-patterns",level:3},{value:"Summary",id:"summary",level:2}];function d(e){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.h1,{id:"ros-2-architecture",children:"ROS 2 Architecture"}),"\n",(0,t.jsx)(i.h2,{id:"introduction-to-ros-2",children:"Introduction to ROS 2"}),"\n",(0,t.jsx)(i.p,{children:"The Robot Operating System 2 (ROS 2) is not an operating system in the traditional sense, but rather a flexible framework for writing robot software. It is a collection of tools, libraries, and conventions that aim to simplify the task of creating complex and robust robot behavior across a wide variety of robot platforms, hardware architectures, and applications."}),"\n",(0,t.jsx)(i.p,{children:"ROS 2 is the successor to ROS 1, designed to address the limitations of the original system and to enable deployment in production environments. It provides the infrastructure for distributed computing, hardware abstraction, device drivers, libraries for implementing common robot functionality, and visualization tools."}),"\n",(0,t.jsx)(i.h3,{id:"key-improvements-in-ros-2",children:"Key Improvements in ROS 2"}),"\n",(0,t.jsx)(i.h4,{id:"real-time-support",children:"Real-time Support"}),"\n",(0,t.jsx)(i.p,{children:"ROS 2 is designed with real-time applications in mind, providing better support for time-constrained applications where precise timing is critical for robot behavior."}),"\n",(0,t.jsx)(i.h4,{id:"security",children:"Security"}),"\n",(0,t.jsx)(i.p,{children:"ROS 2 includes built-in security mechanisms, including authentication, authorization, and encryption, making it suitable for deployment in production environments."}),"\n",(0,t.jsx)(i.h4,{id:"improved-architecture",children:"Improved Architecture"}),"\n",(0,t.jsx)(i.p,{children:"ROS 2 uses a more robust communication architecture based on Data Distribution Service (DDS), which provides better reliability and performance for real-time systems."}),"\n",(0,t.jsx)(i.h4,{id:"support-for-multiple-platforms",children:"Support for Multiple Platforms"}),"\n",(0,t.jsx)(i.p,{children:"ROS 2 runs on multiple operating systems including Linux, macOS, and Windows, and supports various CPU architectures."}),"\n",(0,t.jsx)(i.h2,{id:"core-concepts-of-ros-2-architecture",children:"Core Concepts of ROS 2 Architecture"}),"\n",(0,t.jsx)(i.h3,{id:"nodes",children:"Nodes"}),"\n",(0,t.jsx)(i.p,{children:"A node is a process that performs computation. ROS 2 is designed to be a distributed system of multiple nodes working together. Nodes are typically organized into a package, which contains the source code, configuration, and other resources needed to run the node."}),"\n",(0,t.jsx)(i.p,{children:"Nodes in ROS 2 can:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Subscribe to topics to receive data"}),"\n",(0,t.jsx)(i.li,{children:"Publish data to topics"}),"\n",(0,t.jsx)(i.li,{children:"Provide services"}),"\n",(0,t.jsx)(i.li,{children:"Call services"}),"\n",(0,t.jsx)(i.li,{children:"Create and act on parameters"}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-python",children:"# Example ROS 2 node structure\nimport rclpy\nfrom rclpy.node import Node\n\nclass MinimalPublisher(Node):\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello World: %d' % self.i\n        self.publisher.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n        self.i += 1\n"})}),"\n",(0,t.jsx)(i.h3,{id:"topics-and-messages",children:"Topics and Messages"}),"\n",(0,t.jsx)(i.p,{children:"Topics are named buses over which nodes exchange messages. Messages are the data that travels between nodes. The ROS 2 messaging system is designed to be as agnostic as possible about the content of messages, supporting various data types including primitive types and nested structures."}),"\n",(0,t.jsx)(i.p,{children:"The communication is publish-subscribe based, where publishers send messages to topics without knowing who (if anyone) is subscribed. Subscribers receive messages from topics without knowing who (if anyone) is publishing."}),"\n",(0,t.jsx)(i.h3,{id:"services",children:"Services"}),"\n",(0,t.jsx)(i.p,{children:"Services provide a request-response communication pattern. A service client sends a request to a service server, which processes the request and returns a response. This is useful for operations that should return a result immediately or that require more complex interactions than topics provide."}),"\n",(0,t.jsx)(i.h3,{id:"actions",children:"Actions"}),"\n",(0,t.jsx)(i.p,{children:"Actions are a more advanced communication pattern for long-running tasks that include feedback during execution and the ability to cancel the task. Actions are appropriate for goals that take a significant amount of time to complete, such as navigation goals."}),"\n",(0,t.jsx)(i.h3,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsx)(i.p,{children:"Parameters are named, typed values that belong to a specific node. They allow nodes to be configured without recompilation and are typically used for configuration values that don't change during runtime."}),"\n",(0,t.jsx)(i.h2,{id:"data-distribution-service-dds",children:"Data Distribution Service (DDS)"}),"\n",(0,t.jsx)(i.p,{children:"ROS 2's communication layer is built on DDS (Data Distribution Service), a middleware standard for distributed real-time systems. DDS provides:"}),"\n",(0,t.jsx)(i.h3,{id:"quality-of-service-qos-settings",children:"Quality of Service (QoS) Settings"}),"\n",(0,t.jsx)(i.p,{children:"QoS settings allow publishers and subscribers to specify their communication preferences and requirements. These include:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Reliability"}),": Best effort or reliable delivery"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Durability"}),": Volatile or transient local durability"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"History"}),": Keep all or keep last N messages"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Deadline"}),": Maximum time between consecutive messages"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Liveliness"}),": How to determine if a publisher is alive"]}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"middleware-independence",children:"Middleware Independence"}),"\n",(0,t.jsx)(i.p,{children:"ROS 2 can work with different DDS implementations including Fast DDS, Cyclone DDS, and RTI Connext DDS, allowing users to choose the one that best fits their requirements."}),"\n",(0,t.jsx)(i.h2,{id:"client-library-layers",children:"Client Library Layers"}),"\n",(0,t.jsx)(i.h3,{id:"rclcpp-and-rclpy",children:"rclcpp and rclpy"}),"\n",(0,t.jsx)(i.p,{children:"ROS 2 client libraries provide the standard interface to ROS 2 functionality. The two main client libraries are:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"rclcpp"}),": The C++ client library"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"rclpy"}),": The Python client library"]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"These libraries handle the communication with the DDS implementation and provide the standard ROS 2 API to users."}),"\n",(0,t.jsx)(i.h2,{id:"package-management",children:"Package Management"}),"\n",(0,t.jsx)(i.h3,{id:"ament",children:"Ament"}),"\n",(0,t.jsx)(i.p,{children:"ROS 2 uses Ament as its build system and package manager, replacing the Catkin build system from ROS 1. Ament is more compatible with standard CMake practices and supports packages written in different languages."}),"\n",(0,t.jsx)(i.h3,{id:"package-structure",children:"Package Structure"}),"\n",(0,t.jsx)(i.p,{children:"A typical ROS 2 package contains:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"CMakeLists.txt"}),": Build instructions for C++ packages"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"package.xml"}),": Package metadata and dependencies"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"launch/"}),": Launch files for starting multiple nodes"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"src/"}),": Source code files"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"test/"}),": Unit and integration test files"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"config/"}),": Configuration files and parameters"]}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"architecture-design-philosophy",children:"Architecture Design Philosophy"}),"\n",(0,t.jsx)(i.h3,{id:"distributed-computing",children:"Distributed Computing"}),"\n",(0,t.jsx)(i.p,{children:"ROS 2 is designed to support distributed computing across multiple machines. This is essential for complex robots that may have multiple computers, or for multi-robot systems."}),"\n",(0,t.jsx)(i.h3,{id:"language-independence",children:"Language Independence"}),"\n",(0,t.jsx)(i.p,{children:"ROS 2 supports multiple programming languages (initially C++ and Python, with additional languages like Rust and Java being developed). This allows developers to use the most appropriate language for specific tasks."}),"\n",(0,t.jsx)(i.h3,{id:"real-time-safety",children:"Real-time Safety"}),"\n",(0,t.jsx)(i.p,{children:"ROS 2 is designed to be compatible with real-time systems (though real-time guarantees depend on the underlying OS). This makes it suitable for safety-critical robotic applications."}),"\n",(0,t.jsx)(i.h3,{id:"modularity",children:"Modularity"}),"\n",(0,t.jsx)(i.p,{children:"The architecture is designed to be modular, allowing components to be replaced or extended as needed. This includes the DDS implementation, build system, and client libraries."}),"\n",(0,t.jsx)(i.h2,{id:"ros-2-vs-ros-1-architecture",children:"ROS 2 vs. ROS 1 Architecture"}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:"Feature"}),(0,t.jsx)(i.th,{children:"ROS 1"}),(0,t.jsx)(i.th,{children:"ROS 2"})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Communication"}),(0,t.jsx)(i.td,{children:"Custom TCP/UDP"}),(0,t.jsx)(i.td,{children:"DDS-based"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Master"}),(0,t.jsx)(i.td,{children:"Required master node"}),(0,t.jsx)(i.td,{children:"No master, peer-to-peer"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Security"}),(0,t.jsx)(i.td,{children:"None"}),(0,t.jsx)(i.td,{children:"Built-in security"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Platforms"}),(0,t.jsx)(i.td,{children:"Linux primarily"}),(0,t.jsx)(i.td,{children:"Linux, Windows, macOS"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Real-time"}),(0,t.jsx)(i.td,{children:"Limited"}),(0,t.jsx)(i.td,{children:"Better support"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"Build system"}),(0,t.jsx)(i.td,{children:"Catkin"}),(0,t.jsx)(i.td,{children:"Ament (CMake-based)"})]})]})]}),"\n",(0,t.jsx)(i.h2,{id:"implementation-considerations",children:"Implementation Considerations"}),"\n",(0,t.jsx)(i.h3,{id:"node-design",children:"Node Design"}),"\n",(0,t.jsx)(i.p,{children:"When designing nodes in ROS 2, consider:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Each node should have a single responsibility"}),"\n",(0,t.jsx)(i.li,{children:"Use appropriate QoS settings for your use case"}),"\n",(0,t.jsx)(i.li,{children:"Properly handle node lifecycle (startup, running, shutdown)"}),"\n",(0,t.jsx)(i.li,{children:"Implement good error handling and logging"}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"communication-patterns",children:"Communication Patterns"}),"\n",(0,t.jsx)(i.p,{children:"Choose the appropriate communication pattern:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Topics"}),": For streaming data and loose coupling"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Services"}),": For request-response interactions"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Actions"}),": For long-running tasks with feedback and cancellation"]}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(i.p,{children:"ROS 2 architecture provides a robust foundation for building complex robotic systems. Its distributed computing capabilities, security features, and real-time support make it suitable for both research and production environments. Understanding the core concepts of nodes, topics, services, and actions is essential for effective robot software development with ROS 2."}),"\n",(0,t.jsx)(i.p,{children:"In the following sections, we'll explore these concepts in more detail and see how they enable the implementation of embodied intelligence systems that bridge digital AI models with physical robotic bodies."})]})}function h(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453(e,i,n){n.d(i,{R:()=>o,x:()=>a});var t=n(6540);const s={},r=t.createContext(s);function o(e){const i=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:i},e.children)}}}]);