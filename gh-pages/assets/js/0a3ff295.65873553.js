"use strict";(globalThis.webpackChunkphysical_ai_curriculum_book=globalThis.webpackChunkphysical_ai_curriculum_book||[]).push([[915],{4432(e,n,i){i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>c});var s=i(4848),o=i(8453);const a={sidebar_position:1},l="Gazebo Simulation Environment Setup",r={id:"module-2-digital-twin/week-6-7/gazebo-setup",title:"Gazebo Simulation Environment Setup",description:"Introduction to Gazebo",source:"@site/docs/module-2-digital-twin/week-6-7/gazebo-setup.md",sourceDirName:"module-2-digital-twin/week-6-7",slug:"/module-2-digital-twin/week-6-7/gazebo-setup",permalink:"/physical-ai-curriculum-book/docs/module-2-digital-twin/week-6-7/gazebo-setup",draft:!1,unlisted:!1,editUrl:"https://github.com/Anam-Noman/physical-ai-curriculum-book/edit/main/docs/module-2-digital-twin/week-6-7/gazebo-setup.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"curriculumSidebar",previous:{title:"Digital Twin Concept Explanation",permalink:"/physical-ai-curriculum-book/docs/module-2-digital-twin/digital-twin-concept"},next:{title:"Robot Description Formats: URDF and SDF",permalink:"/physical-ai-curriculum-book/docs/module-2-digital-twin/week-6-7/urdf-sdf"}},t={},c=[{value:"Introduction to Gazebo",id:"introduction-to-gazebo",level:2},{value:"Installing Gazebo",id:"installing-gazebo",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Installation Methods",id:"installation-methods",level:3},{value:"Method 1: Installing Gazebo from OSRF Repository (Recommended)",id:"method-1-installing-gazebo-from-osrf-repository-recommended",level:4},{value:"Method 2: Installing Gazebo via Snap",id:"method-2-installing-gazebo-via-snap",level:4},{value:"Method 3: Building from Source (Advanced)",id:"method-3-building-from-source-advanced",level:4},{value:"Installing Gazebo ROS Packages",id:"installing-gazebo-ros-packages",level:3},{value:"Verifying Installation",id:"verifying-installation",level:2},{value:"Gazebo Components",id:"gazebo-components",level:2},{value:"Core Components",id:"core-components",level:3},{value:"Key Features",id:"key-features",level:3},{value:"Basic Gazebo Usage",id:"basic-gazebo-usage",level:2},{value:"Launching Gazebo",id:"launching-gazebo",level:3},{value:"Basic Commands in Gazebo",id:"basic-commands-in-gazebo",level:3},{value:"Gazebo and ROS 2 Integration",id:"gazebo-and-ros-2-integration",level:2},{value:"Launching Gazebo with ROS 2",id:"launching-gazebo-with-ros-2",level:3},{value:"Gazebo ROS 2 Packages",id:"gazebo-ros-2-packages",level:3},{value:"Creating a Basic Simulation Environment",id:"creating-a-basic-simulation-environment",level:2},{value:"Step 1: Create a Simple World File",id:"step-1-create-a-simple-world-file",level:3},{value:"Step 2: Launch Gazebo with Your World",id:"step-2-launch-gazebo-with-your-world",level:3},{value:"Configuring GPU Acceleration",id:"configuring-gpu-acceleration",level:2},{value:"Troubleshooting Common Issues",id:"troubleshooting-common-issues",level:2},{value:"Issue 1: Graphics/Rendering Problems",id:"issue-1-graphicsrendering-problems",level:3},{value:"Issue 2: Performance Issues",id:"issue-2-performance-issues",level:3},{value:"Issue 3: ROS 2 Communication Failures",id:"issue-3-ros-2-communication-failures",level:3},{value:"Issue 4: Port Conflicts",id:"issue-4-port-conflicts",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"gazebo-simulation-environment-setup",children:"Gazebo Simulation Environment Setup"}),"\n",(0,s.jsx)(n.h2,{id:"introduction-to-gazebo",children:"Introduction to Gazebo"}),"\n",(0,s.jsx)(n.p,{children:"Gazebo is a powerful physics-based simulation environment that provides realistic rendering, accurate physics simulation, and sensor emulation for robotics applications. It's an essential tool in the Physical AI pipeline, allowing developers to test and validate robot behaviors before deploying to real hardware."}),"\n",(0,s.jsx)(n.p,{children:"Gazebo simulates complex environments with accurate physics properties, making it ideal for testing Physical AI systems that must interact with the physical world. It supports integration with ROS 2 through the Gazebo ROS packages, enabling seamless communication between simulated robots and ROS 2 nodes."}),"\n",(0,s.jsx)(n.h2,{id:"installing-gazebo",children:"Installing Gazebo"}),"\n",(0,s.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsx)(n.p,{children:"Before installing Gazebo, ensure you have:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"A compatible Linux distribution (Ubuntu 22.04+ recommended for Gazebo Garden/Harmonic)"}),"\n",(0,s.jsx)(n.li,{children:"ROS 2 Humble Hawksbill installed"}),"\n",(0,s.jsx)(n.li,{children:"Sufficient hardware resources (dedicated GPU recommended for rendering)"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"installation-methods",children:"Installation Methods"}),"\n",(0,s.jsx)(n.h4,{id:"method-1-installing-gazebo-from-osrf-repository-recommended",children:"Method 1: Installing Gazebo from OSRF Repository (Recommended)"}),"\n",(0,s.jsx)(n.p,{children:"For Ubuntu 22.04 with Gazebo Garden:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Add the OSRF apt repository\nsudo apt update && sudo apt install -y wget\nsudo wget https://packages.osrfoundation.org/gazebo.gpg -O /usr/share/keyrings/pkgs-osrf-archive-keyring.gpg\necho "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/pkgs-osrf-archive-keyring.gpg] http://packages.osrfoundation.org/gazebo/ubuntu-stable $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/gazebo-stable.list > /dev/null\n\n# Update and install Gazebo\nsudo apt update\nsudo apt install gazebo-garden\n'})}),"\n",(0,s.jsx)(n.p,{children:"For the latest version (Gazebo Harmonic):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Add the OSRF apt repository for the latest\nsudo apt update && sudo apt install -y wget\nsudo wget https://packages.osrfoundation.org/gazebo.gpg -O /usr/share/keyrings/pkgs-osrf-archive-keyring.gpg\necho "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/pkgs-osrf-archive-keyring.gpg] http://packages.osrfoundation.org/gazebo/ubuntu-latest $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/gazebo-latest.list > /dev/null\n\nsudo apt update\nsudo apt install gazebo-harmonic\n'})}),"\n",(0,s.jsx)(n.h4,{id:"method-2-installing-gazebo-via-snap",children:"Method 2: Installing Gazebo via Snap"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo snap install gazebo-sim --classic\n"})}),"\n",(0,s.jsx)(n.h4,{id:"method-3-building-from-source-advanced",children:"Method 3: Building from Source (Advanced)"}),"\n",(0,s.jsx)(n.p,{children:"For the latest features or development purposes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Install build dependencies\nsudo apt install -y cmake pkg-config python3-pip\npip3 install colcon-common-extensions vcstool\n\n# Create a workspace for Gazebo\nmkdir -p ~/gz_ws/src\ncd ~/gz_ws\n\n# Download the latest source\nwget https://raw.githubusercontent.com/gazebo-tooling/gazebodistro/master/index.yaml\nvcs import src < index.yaml\n\n# Build Gazebo\ncolcon build\n"})}),"\n",(0,s.jsx)(n.h3,{id:"installing-gazebo-ros-packages",children:"Installing Gazebo ROS Packages"}),"\n",(0,s.jsx)(n.p,{children:"To use Gazebo with ROS 2, you need the Gazebo ROS packages:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Source ROS 2 environment\nsource /opt/ros/humble/setup.bash\n\n# Install Gazebo ROS packages\nsudo apt install ros-humble-gazebo-ros-pkgs ros-humble-gazebo-ros2-control ros-humble-gazebo-dev\n"})}),"\n",(0,s.jsx)(n.h2,{id:"verifying-installation",children:"Verifying Installation"}),"\n",(0,s.jsx)(n.p,{children:"After installation, verify that Gazebo is properly installed:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Test basic Gazebo functionality\ngz sim --version\n\n# Launch the basic Gazebo GUI\ngz sim\n\n# If you have ROS 2 installed, you can also test:\nros2 run gazebo_ros gazebo\n"})}),"\n",(0,s.jsx)(n.h2,{id:"gazebo-components",children:"Gazebo Components"}),"\n",(0,s.jsx)(n.h3,{id:"core-components",children:"Core Components"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Gazebo Server (gz sim)"}),": Runs the physics simulation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Gazebo GUI (gz sim -g)"}),": Provides the visual interface"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Gazebo Client (gz client)"}),": Allows command-line interaction"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"key-features",children:"Key Features"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Physics Engines"}),": Support for ODE, Bullet, and DART physics engines"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Sensor Simulation"}),": Cameras, LiDAR, IMUs, GPS, contact sensors, etc."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Realistic Rendering"}),": Advanced graphics rendering with support for lighting"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Plugin System"}),": Extensible functionality through plugins"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ROS 2 Integration"}),": Direct communication between Gazebo and ROS 2"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"basic-gazebo-usage",children:"Basic Gazebo Usage"}),"\n",(0,s.jsx)(n.h3,{id:"launching-gazebo",children:"Launching Gazebo"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Launch Gazebo with the default empty world\ngz sim\n\n# Launch with a specific world file\ngz sim -r simple_room.sdf\n\n# Launch with GUI\ngz sim -g\n\n# Launch with a specific world and run in real-time\ngz sim -r -v 1 empty.sdf\n"})}),"\n",(0,s.jsx)(n.h3,{id:"basic-commands-in-gazebo",children:"Basic Commands in Gazebo"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Right-click"})," and drag: Move the camera view"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Middle-click"})," and drag: Pan the camera"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Mouse wheel"}),": Zoom in/out"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Ctrl + Left-click"}),": Select objects"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Spacebar"}),": Pause/unpause simulation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"R"}),": Reset simulation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"S"}),": Take a screenshot"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"gazebo-and-ros-2-integration",children:"Gazebo and ROS 2 Integration"}),"\n",(0,s.jsx)(n.h3,{id:"launching-gazebo-with-ros-2",children:"Launching Gazebo with ROS 2"}),"\n",(0,s.jsx)(n.p,{children:"To use Gazebo with ROS 2, you typically launch it using a ROS 2 launch file:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Example launch file content\nfrom launch import LaunchDescription\nfrom launch.actions import IncludeLaunchDescription\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\nfrom launch.substitutions import PathJoinSubstitution\nfrom launch_ros.substitutions import FindPackageShare\n\n\ndef generate_launch_description():\n    return LaunchDescription([\n        # Launch Gazebo\n        IncludeLaunchDescription(\n            PythonLaunchDescriptionSource([\n                PathJoinSubstitution([\n                    FindPackageShare('ros_gz_sim'),\n                    'launch',\n                    'gz_sim.launch.py'\n                ])\n            ]),\n            launch_arguments={'gz_args': '-r empty.sdf'}.items()\n        )\n    ])\n"})}),"\n",(0,s.jsx)(n.h3,{id:"gazebo-ros-2-packages",children:"Gazebo ROS 2 Packages"}),"\n",(0,s.jsx)(n.p,{children:"Key ROS 2 packages for Gazebo integration:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"gazebo_ros_pkgs"})}),": Core ROS 2 plugins for Gazebo communication"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"gazebo_dev"})}),": Development tools and headers"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"ros_gz_bridge"})}),": Bridges between ROS 2 and Gazebo transport"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"ros_gz_sim"})}),": Launch files and utilities for running Gazebo with ROS 2"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"creating-a-basic-simulation-environment",children:"Creating a Basic Simulation Environment"}),"\n",(0,s.jsx)(n.h3,{id:"step-1-create-a-simple-world-file",children:"Step 1: Create a Simple World File"}),"\n",(0,s.jsxs)(n.p,{children:["Create a basic world file named ",(0,s.jsx)(n.code,{children:"simple_room.sdf"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" ?>\n<sdf version="1.7">\n  <world name="simple_room">\n    \x3c!-- Include a default ground plane --\x3e\n    <include>\n      <uri>model://ground_plane</uri>\n    </include>\n    \n    \x3c!-- Include a default light source --\x3e\n    <include>\n      <uri>model://sun</uri>\n    </include>\n    \n    \x3c!-- Create a simple room --\x3e\n    <model name="room_walls">\n      <pose>0 0 1.5 0 0 0</pose>\n      <link name="wall_1">\n        <pose>-5 0 1.5 0 0 0</pose>\n        <collision name="collision">\n          <geometry>\n            <box>\n              <size>0.1 10 3</size>\n            </box>\n          </geometry>\n        </collision>\n        <visual name="visual">\n          <geometry>\n            <box>\n              <size>0.1 10 3</size>\n            </box>\n          </geometry>\n          <material>\n            <ambient>0.8 0.8 0.8 1</ambient>\n            <diffuse>0.8 0.8 0.8 1</diffuse>\n          </material>\n        </visual>\n      </link>\n      \x3c!-- Additional walls would be defined similarly --\x3e\n    </model>\n  </world>\n</sdf>\n'})}),"\n",(0,s.jsx)(n.h3,{id:"step-2-launch-gazebo-with-your-world",children:"Step 2: Launch Gazebo with Your World"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Launch with your custom world\ngz sim -r simple_room.sdf\n"})}),"\n",(0,s.jsx)(n.h2,{id:"configuring-gpu-acceleration",children:"Configuring GPU Acceleration"}),"\n",(0,s.jsx)(n.p,{children:"For optimal performance, ensure GPU acceleration is properly configured:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Check if GPU is detected\nlspci | grep -E "VGA|3D"\n\n# Verify OpenGL support\nglxinfo | grep -i "direct rendering"\nglxinfo | grep -i "opengl"\n\n# Run Gazebo with dedicated GPU (if using Optimus/Bumblebee)\noptirun gz sim  # For NVIDIA Optimus systems\n'})}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting-common-issues",children:"Troubleshooting Common Issues"}),"\n",(0,s.jsx)(n.h3,{id:"issue-1-graphicsrendering-problems",children:"Issue 1: Graphics/Rendering Problems"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Symptom"}),": Black screens, poor rendering, or crashes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),": Update graphics drivers and ensure OpenGL 3.3+ is supported"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"issue-2-performance-issues",children:"Issue 2: Performance Issues"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Symptom"}),": Slow simulation or low frame rates"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),": Reduce visual quality, use simpler models, or increase hardware resources"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"issue-3-ros-2-communication-failures",children:"Issue 3: ROS 2 Communication Failures"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Symptom"}),": Nodes can't communicate with Gazebo"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),": Check that Gazebo and ROS 2 are using the same RMW implementation"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Check RMW implementation\nprintenv | grep RMW\n"})}),"\n",(0,s.jsx)(n.h3,{id:"issue-4-port-conflicts",children:"Issue 4: Port Conflicts"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Symptom"}),": Error about ports already in use"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Solution"}),": Kill existing Gazebo processes or change ports"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Kill existing Gazebo processes\npkill gz\npkill gazebo\n"})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Start Simple"}),": Begin with basic worlds and gradually add complexity"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use Proper Models"}),": Use simple geometric shapes for initial testing before complex meshes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Validate Physics"}),": Test physics parameters to ensure they match real-world behavior"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Monitor Performance"}),": Keep an eye on CPU/GPU usage and simulation step time"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Document Configurations"}),": Maintain notes on working configurations for reproducibility"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsx)(n.p,{children:"Setting up Gazebo is a critical step in developing Physical AI systems. A properly configured simulation environment allows for safe, efficient testing of robot behaviors before deployment to real hardware. This foundation enables more advanced simulation techniques including physics simulation, sensor integration, and robot-world interaction that we'll explore in the following sections."}),"\n",(0,s.jsx)(n.p,{children:"With Gazebo properly installed and configured, you're ready to explore robot description formats (URDF/SDF) that define the robots you'll simulate in the next section."})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>l,x:()=>r});var s=i(6540);const o={},a=s.createContext(o);function l(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);